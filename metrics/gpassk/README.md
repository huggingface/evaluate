---
title: G-Pass@k
emoji: ðŸ¤— 
colorFrom: blue
colorTo: red
sdk: gradio
sdk_version: 3.19.1
app_file: app.py
pinned: false
tags:
- evaluate
- metric
description: >-
    G-Pass@$k$ is a generalization of the Pass@$k$ metric, which evaluates both the stability and potential of large language models (LLMs) in reasoning tasks, described in https://arxiv.org/abs/2412.13147.
---

# Metric Card for GPassK

## Metric Description
G-Pass@ $k$ is a generalization of the Pass@$k$ metric, which evaluates both the stability and potential of large language models (LLMs) in reasoning tasks. 

- **G-Pass@k**: Evaluates the probability that an LLM will correctly solve at least $ m = \lceil \tau \cdot k \rceil $ out of $ k $ attempts, where:
  - $ \tau $: The threshold indicating the minimum proportion of correct solutions.
  - $ c $: The number of correct solutions generated by the model.
  - $ n $: The total number of generations or trials.

$$
\text{G-Pass@}k_{\tau} = \left[ \sum_{j = \lceil \tau \cdot k \rceil}^{c} \frac{\binom{c}{j} \cdot \binom{n - c}{k - j}}{\binom{n}{k}} \right]
$$

- **mG-Pass@k**: Extends G-Pass@$ k_{\tau} $ by integrating over all thresholds from 0.5 to 1.0, effectively calculating the area under the curve of G-Pass@$ k_{\tau} $. This provides an overall measure of the LLM's performance across different stringency levels.

$$
\text{mG-Pass@}k = 2\int_{0.5}^{1.0} \text{G-Pass@}k_{\tau} d \tau = \frac{2}{k} \sum_{i= \lceil 0.5 \cdot k \rceil + 1}^{k} \text{G-Pass@}k_{\frac{i}{k}}
$$


## How to Use

### Inputs
To use the G-Pass@k metric, provide the following inputs:

- **predictions** (`List[List[str]]`): A list of lists, where each sublist contains multiple model-generated solutions for a single task.
- **references** (`List[str]`): A list of correct answers corresponding to each set of predictions.
- **k** (`List[int]`): A list of integers representing the number of attempts to consider in the evaluation. Defaults to `[4, 8, 16]`.
- **thresholds** (`List[float]`): A list of floating-point numbers representing the thresholds to consider in the evaluation. Defaults to `[0.25, 0.5, 0.75, 1.0]`.
- **check_correct_fn** (`Callable`): A function that checks if a prediction matches the reference. It should take two parameters (`pred`, `ref`) and return a boolean value.

### Output Values

The G-Pass@k metric returns a dictionary with scores for each combination of $ k $ and threshold, as well as the mG-Pass@k score.

All metrics produce values between 0 and 1, inclusive. A higher score indicates better performance.

#### Values from Popular Papers
For a comprehensive overview of how various open-source and closed-source LLMs perform on this metric, visit [leaderboard](https://open-compass.github.io/GPassK/).

### Examples
Below is an example of how to compute the G-Pass@k metric using Python:

```python
from evaluate import load

g_pass_at_k_evaluator = load("gpassk")
predictions = [["a", "b", "a", "a", "b", "a", "b", "c", "a", "c", "b", "a", "a", "b", "a", "b"]]
references = ["a"]
check_correct_fn = lambda pred, ref: pred == ref

g_pass_at_k = g_pass_at_k_evaluator.compute(
    predictions=predictions,
    references=references,
    k=[4, 8],
    check_correct_fn=check_correct_fn
)

print(g_pass_at_k)
```

Sample output:
```json
{
    "G-Pass@4_0.25": 0.9615384615384616,
    "G-Pass@4_0.5": 0.7153846153846154,
    "G-Pass@4_0.75": 0.2846153846153846,
    "G-Pass@4_1.0": 0.038461538461538464,
    "G-Pass@8_0.25": 0.9949494949494949,
    "G-Pass@8_0.5": 0.6903651903651904,
    "G-Pass@8_0.75": 0.06596736596736597,
    "G-Pass@8_1.0": 7.77000777000777e-05,
    "mG-Pass@4": 0.16153846153846152,
    "mG-Pass@8": 0.09518259518259518
}
```

## Citation
```bibtex
@misc{liu2024llmscapablestablereasoning,
      title={Are Your LLMs Capable of Stable Reasoning?}, 
      author={Junnan Liu and Hongwei Liu and Linchen Xiao and Ziyi Wang and Kuikun Liu and Songyang Gao and Wenwei Zhang and Songyang Zhang and Kai Chen},
      year={2024},
      eprint={2412.13147},
      archivePrefix={arXiv},
      primaryClass={cs.AI},
      url={https://arxiv.org/abs/2412.13147}, 
}
```

## Further References

- [GPassK on github](https://github.com/open-compass/GPassK/)
